---
- name: Install required tools
  hosts: localhost
  remote_user: vagrant

  tasks:
  - name: Install VIM
    yum:
      name: vim
      state: latest

  - name: Install Git
    yum:
      name: git
      state: latest
  
  - name: Install PostgreSQL server
    yum:
      name: postgresql-server,postgresql-contrib
      state: latest
    register: postgresqlserver

  - name: Create PostgreSQL data cluster
    command: postgresql-setup initdb
    when: postgresqlserver.changed

  - name: Install PostgreSQL tools
    yum:
       name: postgresql,postgresql-contrib
       state: latest

  - name: Install Django libraries
    yum:
      name: "python-django*"
      state: latest

  - name: Install BeautifulSoup libraries
    yum:
      name: python-beautifulsoup4
      state: latest

  - name: Install libraries required by Ansible
    yum: 
      name: python-psycopg2
      state: latest
